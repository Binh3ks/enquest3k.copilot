CHIáº¾N LÆ¯á»¢C Má»šI: CHIA NHá»Ž THÃ€NH CÃC BÆ¯á»šC Cá»¤ THá»‚
BÆ°á»›c 1: Táº¡o file cáº¥u trÃºc dá»¯ liá»‡u trÆ°á»›c
File: src/data/conversationStructure.js
javascript// Táº¡o file nÃ y TRÆ¯á»šC Ä‘á»ƒ Copilot hiá»ƒu cáº¥u trÃºc
export const conversationTemplate = {
  weekNumber: 1,
  phase: 1,
  missionTitle: "First Day at School",
  
  // 10 topics chÃ­nh (Turn 1-10)
  contentTopics: [
    {
      turn: 1,
      label: "Name introduction",
      easyQ: "Hi! I am your teacher. What is your name?",
      advQ: "Hello! I'm Ms. Sarah, your teacher. Could you introduce yourself?",
      vocab: ["name", "teacher"],
      hint: "My name is ___"
    },
    // ... 9 topics ná»¯a
  ],
  
  // 5 topics má»Ÿ rá»™ng (Turn 11-15)
  extensionTopics: [
    {
      turn: 11,
      label: "Own school experience",
      easyQ: "Do you like school?",
      advQ: "How does your school compare to other schools you know?",
      vocab: ["school", "like"]
    },
    // ... 4 topics ná»¯a
  ]
};
BÆ°á»›c 2: Táº¡o file dá»¯ liá»‡u Week 1 cá»¥ thá»ƒ
File: src/data/weeks/week1.js
javascriptimport syllabusWeek1 from '../syllabus/week1';
import vocabWeek1 from '../vocab/week1';

export const week1Conversation = {
  weekNumber: 1,
  phase: 1,
  missionTitle: "First Day at School",
  storyContext: "Alex goes to a new school for the first time",
  
  // Láº¥y tá»« syllabus
  targetGrammar: syllabusWeek1.grammar, // ["I am", "My"]
  targetVocabulary: vocabWeek1.words, // 10 tá»«
  
  easyModeContext: "The Superhero Me",
  advancedModeContext: "The Junior Scholar",
  
  // 10 content topics
  contentTopics: [
    // Turn 1: Name
    {
      turn: 1,
      label: "Name introduction",
      type: "factual",
      easyQ: "Hi! I am your teacher. What is your name?",
      advQ: "Hello! I'm Ms. Sarah. Could you tell me your name?",
      expectedVocab: ["name"],
      expectedGrammar: "My name is ___",
      hints: ["My name is ___", "I am ___"]
    },
    
    // Turn 2: Favorite subject
    {
      turn: 2,
      label: "Favorite subject",
      type: "personal",
      easyQ: "What subject do you like?",
      advQ: "What is your favorite subject in school?",
      expectedVocab: ["subject", "like"],
      expectedGrammar: "I like ___",
      hints: ["I like ___", "My favorite is ___"]
    },
    
    // Turn 3: Why that subject
    {
      turn: 3,
      label: "Why that subject is interesting",
      type: "opinion",
      easyQ: "Why do you like [subject]?",
      advQ: "What makes [subject] interesting to you?",
      expectedVocab: ["interesting", "because"],
      hints: ["Because it is ___", "I like it because ___"]
    },
    
    // Turn 4: Teacher/classroom
    {
      turn: 4,
      label: "Teacher or classroom details",
      type: "factual",
      easyQ: "Who is your teacher?",
      advQ: "Can you tell me about your teacher or classroom?",
      expectedVocab: ["teacher", "classroom"],
      hints: ["My teacher is ___", "The classroom is ___"]
    },
    
    // Turn 5: Feelings
    {
      turn: 5,
      label: "Feelings about first day",
      type: "personal",
      easyQ: "How do you feel today?",
      advQ: "How do you feel about your first day at this school?",
      expectedVocab: ["feel", "happy", "nervous"],
      hints: ["I feel ___", "I am ___"]
    },
    
    // Turn 6: Friends
    {
      turn: 6,
      label: "Making new friends",
      type: "personal",
      easyQ: "Did you meet new friends?",
      advQ: "Have you made any new friends today?",
      expectedVocab: ["friend", "meet"],
      hints: ["Yes, I met ___", "I talked to ___"]
    },
    
    // Turn 7: School supplies
    {
      turn: 7,
      label: "School supplies",
      type: "factual",
      easyQ: "What is in your bag?",
      advQ: "What did you bring in your backpack?",
      expectedVocab: ["book", "pen", "bag"],
      hints: ["I have ___", "I brought ___"]
    },
    
    // Turn 8: Lunch/break
    {
      turn: 8,
      label: "Lunch or break time",
      type: "personal",
      easyQ: "What did you eat for lunch?",
      advQ: "What did you do during lunch time?",
      expectedVocab: ["lunch", "eat"],
      hints: ["I ate ___", "I played ___"]
    },
    
    // Turn 9: Favorite part
    {
      turn: 9,
      label: "Favorite part of the day",
      type: "opinion",
      easyQ: "What did you like today?",
      advQ: "What was your favorite part of today?",
      expectedVocab: ["favorite", "like"],
      hints: ["I liked ___", "My favorite was ___"]
    },
    
    // Turn 10: What learned
    {
      turn: 10,
      label: "What learned today",
      type: "factual",
      easyQ: "What did you learn today?",
      advQ: "What new thing did you learn at school today?",
      expectedVocab: ["learn", "new"],
      hints: ["I learned ___", "We studied ___"]
    }
  ],
  
  // 5 extension topics (Turn 11-15)
  extensionTopics: [
    {
      turn: 11,
      label: "Own school experiences",
      type: "personal",
      easyQ: "Do you like your school?",
      advQ: "How does this school compare to your previous school?",
      expectedVocab: ["school", "different"]
    },
    {
      turn: 12,
      label: "Compare schools",
      type: "comparison",
      easyQ: "Is your school big or small?",
      advQ: "What differences do you notice between schools?",
      expectedVocab: ["big", "small", "different"]
    },
    {
      turn: 13,
      label: "Future education goals",
      type: "prediction",
      easyQ: "What do you want to learn?",
      advQ: "What subjects would you like to study this year?",
      expectedVocab: ["want", "study"]
    },
    {
      turn: 14,
      label: "Favorite teacher memory",
      type: "personal",
      easyQ: "Do you have a favorite teacher?",
      advQ: "Can you share a memory about a teacher you liked?",
      expectedVocab: ["teacher", "remember"]
    },
    {
      turn: 15,
      label: "Closing",
      type: "closing",
      easyQ: "",
      advQ: "",
      expectedVocab: []
    }
  ],
  
  closing: {
    summary: [
      "your first day at school",
      "your favorite subject",
      "making new friends",
      "what you learned"
    ],
    vocabHighlight: ["name", "subject", "friend", "learn"],
    nextWeekTeaser: "Next time, we'll talk about your family!"
  }
};
BÆ°á»›c 3: Táº¡o AI Response Generator Ä‘Æ¡n giáº£n
File: src/ai/responseGenerator.js
javascriptexport class TutorResponseGenerator {
  constructor(weekConfig, mode = 'easy') {
    this.config = weekConfig;
    this.mode = mode;
    this.turn = 0;
    this.phase = 'content';
    this.vocabUsed = new Set();
  }
  
  // BÆ°á»›c 1: Generate acknowledgment
  generateAck(sentiment = 'positive') {
    const acks = {
      positive: ["Great!", "Wonderful!", "Excellent!", "Perfect!", "Amazing!"],
      neutral: ["I see!", "Okay!", "Alright!", "Good!"],
      encouraging: ["That's okay!", "No worries!", "Let's try again!"]
    };
    
    const list = acks[sentiment] || acks.positive;
    return list[Math.floor(Math.random() * list.length)];
  }
  
  // BÆ°á»›c 2: Generate feedback
  generateFeedback(studentInput, currentTopic) {
    // PhÃ¢n tÃ­ch input
    const usedVocab = currentTopic.expectedVocab.filter(word => 
      studentInput.toLowerCase().includes(word.toLowerCase())
    );
    
    if (usedVocab.length > 0) {
      return `I love how you used the word "${usedVocab[0]}"!`;
    }
    
    // Feedback theo topic type
    const feedbackTemplates = {
      factual: "That's good information.",
      personal: "Thank you for sharing that with me.",
      opinion: "That's an interesting perspective.",
      comparison: "That's a thoughtful comparison.",
      prediction: "That sounds like a good plan."
    };
    
    return feedbackTemplates[currentTopic.type] || "That's great!";
  }
  
  // BÆ°á»›c 3: Get next question
  getNextQuestion(turn) {
    const phase = turn <= 10 ? 'content' : 'extension';
    
    if (phase === 'content') {
      const topic = this.config.contentTopics[turn - 1];
      return this.mode === 'easy' ? topic.easyQ : topic.advQ;
    } else {
      const topic = this.config.extensionTopics[turn - 11];
      return this.mode === 'easy' ? topic.easyQ : topic.advQ;
    }
  }
  
  // BÆ°á»›c 4: Generate full response
  generateResponse(studentInput, currentTurn) {
    this.turn = currentTurn;
    
    // Get current topic
    const topic = this.turn <= 10 
      ? this.config.contentTopics[this.turn - 1]
      : this.config.extensionTopics[this.turn - 11];
    
    // Build response
    const ack = this.generateAck('positive');
    const feedback = this.generateFeedback(studentInput, topic);
    const nextQ = this.getNextQuestion(this.turn + 1);
    
    return `${ack} ${feedback} ${nextQ}`;
  }
  
  // Generate closing
  generateClosing(studentName = "there") {
    const summary = this.config.closing.summary.join(", ");
    const vocab = this.config.closing.vocabHighlight.join('", "');
    
    return `
Great work today, ${studentName}!

We talked about:
- ${this.config.closing.summary.join('\n- ')}

You used wonderful words like "${vocab}"!

${this.config.closing.nextWeekTeaser}

See you next time! ðŸ‘‹
    `.trim();
  }
}
BÆ°á»›c 4: TÃ­ch há»£p vÃ o Story Mission Tab
File: src/components/chat/StoryMissionTab.jsx
javascriptimport { week1Conversation } from '../../data/weeks/week1';
import { TutorResponseGenerator } from '../../ai/responseGenerator';

// Trong component
const [generator] = useState(() => 
  new TutorResponseGenerator(week1Conversation, 'easy')
);

const handleSendMessage = (userMessage) => {
  const turn = messages.length / 2 + 1; // TÃ­nh turn hiá»‡n táº¡i
  
  // Generate AI response
  const aiResponse = turn <= 15 
    ? generator.generateResponse(userMessage, turn)
    : generator.generateClosing(studentName);
  
  // Add to messages
  setMessages([...messages, 
    { role: 'user', content: userMessage },
    { role: 'ai', content: aiResponse }
  ]);
};

Táº I SAO CÃCH NÃ€Y HIá»†U QUáº¢ HÆ N?

Chia nhá» code: Má»—i file cÃ³ 1 trÃ¡ch nhiá»‡m rÃµ rÃ ng
Dá»¯ liá»‡u tÃ¡ch biá»‡t: Week data riÃªng, logic riÃªng
Dá»… test: CÃ³ thá»ƒ test tá»«ng function riÃªng láº»
Dá»… scale: Chá»‰ cáº§n copy week1.js â†’ week2.js vÃ  sá»­a ná»™i dung
Copilot dá»… hiá»ƒu: Má»—i láº§n chá»‰ focus 1 file nhá»


HÆ¯á»šNG DáºªN THá»°C THI Tá»ªNG BÆ¯á»šC
Step 1: Táº¡o file week1.js
bash# Trong terminal
touch src/data/weeks/week1.js
Paste ná»™i dung week1.js vÃ o â†’ Save
Step 2: Táº¡o responseGenerator.js
bashtouch src/ai/responseGenerator.js
Paste ná»™i dung responseGenerator.js vÃ o â†’ Save
Step 3: Sá»­a StoryMissionTab.jsx
Má»Ÿ file StoryMissionTab.jsx â†’ ThÃªm import â†’ Sá»­a handleSendMessage
Step 4: Test
bashnpm run dev
VÃ o Story Mission â†’ Chat vá»›i AI â†’ Kiá»ƒm tra 15 turns