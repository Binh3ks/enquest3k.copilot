ğŸ›  Bá»˜ CHá»ˆ DáºªN THá»°C THI: Tá»I Æ¯U HÃ“A MODULE & QUáº¢N LÃ TOKEN

TÃ i liá»‡u nÃ y chá»©a cÃ¡c Prompt vÃ  máº«u tá»‡p tin Ä‘á»ƒ báº¡n yÃªu cáº§u AI thá»±c hiá»‡n viá»‡c tÃ¡i cáº¥u trÃºc dá»± Ã¡n EngQuest nháº±m tiáº¿t kiá»‡m chi phÃ­ vÃ  tÄƒng hiá»‡u suáº¥t.

1. Prompt Thá»±c thi: Chia nhá» Module AITutor.jsx

Má»¥c tiÃªu: TÃ¡ch logic "náº·ng" ra khá»i giao diá»‡n Ä‘á»ƒ giáº£m lÆ°á»£ng token AI pháº£i Ä‘á»c má»—i lÆ°á»£t.

Copy vÃ  gá»­i Prompt nÃ y cho AI:

"Dá»±a trÃªn chiáº¿n lÆ°á»£c module hÃ³a, hÃ£y thá»±c hiá»‡n cÃ¡c bÆ°á»›c sau cho file @src/modules/ai_tutor/AITutor.jsx:

TÃ¡ch toÃ n bá»™ logic API (Gemini Call), Schema, vÃ  System Prompt sang file má»›i: src/services/ai_tutor/engine.js.

TÃ¡ch Ä‘á»‹nh nghÄ©a vÃ  logic thá»±c thi MCP Tools sang file: src/services/ai_tutor/mcp_registry.js.

Chia nhá» cÃ¡c thÃ nh pháº§n UI (ChatWindow, GrammarFocus, HintChips, TabNavigation) vÃ o thÆ° má»¥c src/modules/ai_tutor/components/.

Cáº­p nháº­t AITutor.jsx chá»‰ Ä‘á»ƒ quáº£n lÃ½ State vÃ  káº¿t ná»‘i cÃ¡c component trÃªn.

Äáº£m báº£o cÃ¡c Ä‘Æ°á»ng dáº«n import chÃ­nh xÃ¡c vÃ  á»©ng dá»¥ng khÃ´ng bá»‹ lá»—i biÃªn dá»‹ch."

2. Tá»‡p tin Quy táº¯c: .clauderules (hoáº·c .clinerules)

Má»¥c tiÃªu: NgÄƒn cháº·n AI thá»±c hiá»‡n cÃ¡c hÃ nh vi gÃ¢y lÃ£ng phÃ­ token.

Táº¡o file .clauderules táº¡i thÆ° má»¥c gá»‘c vá»›i ná»™i dung:

# ENGQUEST AI AGENT RULES
- LUÃ”N Äá»ŒC file `docs/ai_application_context.md` trÆ°á»›c khi báº¯t Ä‘áº§u báº¥t ká»³ task nÃ o Ä‘á»ƒ hiá»ƒu cáº¥u trÃºc dá»± Ã¡n.
- NGHIÃŠM Cáº¤M tá»± Ä‘á»™ng cháº¡y cÃ¡c lá»‡nh quÃ©t diá»‡n rá»™ng nhÆ° `grep -r`, `find .`, hoáº·c `ls -R` trÃªn toÃ n bá»™ repo.
- Táº®T hÃ nh vi tá»± Ä‘á»™ng scan láº¡i repo sau má»—i thay Ä‘á»•i. Chá»‰ tÃ¬m kiáº¿m khi User yÃªu cáº§u rÃµ pháº¡m vi thÆ° má»¥c.
- KHÃ”NG Ä‘á»c cÃ¡c thÆ° má»¥c: `node_modules`, `dist`, `.git`, `build`.
- Æ¯u tiÃªn sá»­a lá»—i cá»¥c bá»™ (Partial edits) thay vÃ¬ viáº¿t láº¡i toÃ n bá»™ file.
- Náº¿u má»™t file vÆ°á»£t quÃ¡ 250 dÃ²ng, hÃ£y Ä‘á» xuáº¥t tÃ¡ch module thay vÃ¬ viáº¿t tiáº¿p.
- Náº¿u khÃ´ng tÃ¬m tháº¥y file sau 2 láº§n thá»­, hÃ£y dá»«ng láº¡i vÃ  há»i User Ä‘Æ°á»ng dáº«n chÃ­nh xÃ¡c thay vÃ¬ láº·p láº¡i lá»‡nh tÃ¬m kiáº¿m.


3. Tá»‡p tin Ngá»¯ cáº£nh: docs/ai_application_context.md

Má»¥c tiÃªu: Cung cáº¥p "báº£n Ä‘á»“" cho AI Ä‘á»ƒ nÃ³ khÃ´ng pháº£i tá»± Ä‘i tÃ¬m kiáº¿m.

Ná»™i dung máº«u (HÃ£y cáº­p nháº­t theo thá»±c táº¿ dá»± Ã¡n cá»§a báº¡n):

# ğŸ—º ENGQUEST APPLICATION CONTEXT
**Version:** 1.1.0 | **Last Updated:** 2026-01-03

## ğŸ— Tech Stack
- Frontend: React (Vite), Tailwind CSS, Lucide Icons.
- Backend/AI: Gemini API (2.0 Flash/1.5 Pro).
- Database: Firebase Firestore (DÃ¹ng cho userStorage).

## ğŸ“ Key Directories
- `src/modules/`: Chá»©a cÃ¡c tÃ­nh nÄƒng chÃ­nh (AI Tutor, Shadowing, Vocab).
- `src/services/`: Chá»©a logic xá»­ lÃ½ API vÃ  dá»¯ liá»‡u dÃ¹ng chung.
- `src/assets/`: HÃ¬nh áº£nh vÃ  Ã¢m thanh cá»§a syllabus.

## ğŸ”„ Data Flow (AI Tutor)
1. User gá»­i tin nháº¯n -> `AITutor.jsx` gá»i `engine.js`.
2. `engine.js` láº¥y dá»¯ liá»‡u tuáº§n há»c tá»« `syllabus_db` vÃ  gá»i Gemini API.
3. Gemini tráº£ vá» JSON -> UI hiá»ƒn thá»‹ Giao diá»‡n + Hints + Grammar.

## ğŸ“Œ Current Focus
- Äang thá»±c hiá»‡n chia nhá» module AITutor Ä‘á»ƒ tiáº¿t kiá»‡m token.
- Äang chuáº©n hÃ³a Master Prompt V23.


4. Giao thá»©c TÃ³m táº¯t & BÃ n giao (Handover Protocol)

Má»¥c tiÃªu: Cáº¯t Ä‘á»©t lá»‹ch sá»­ chat dÃ i Ä‘á»ƒ tiáº¿t kiá»‡m tiá»n nhÆ°ng AI váº«n giá»¯ Ä‘Æ°á»£c trÃ­ nhá»›.

TrÆ°á»›c khi nháº¥n "New Task", hÃ£y gÃµ Prompt nÃ y:

"Task nÃ y Ä‘Ã£ xong. HÃ£y tÃ³m táº¯t tráº¡ng thÃ¡i hiá»‡n táº¡i theo Ä‘á»‹nh dáº¡ng sau Ä‘á»ƒ tÃ´i bÃ n giao cho lÆ°á»£t chat tiáº¿p theo:

Summary: (CÃ¡c viá»‡c Ä‘Ã£ lÃ m)

Changes: (CÃ¡c file Ä‘Ã£ sá»­a)

Next Steps: (Viá»‡c cáº§n lÃ m ngay sau khi báº¯t Ä‘áº§u chat má»›i)

Context Pinning: (CÃ¡c file quan trá»ng cáº§n AI Ä‘á»c láº¡i ngay láº­p tá»©c)"

Máº¹o: LuÃ´n gÃµ @docs/ai_application_context.md khi báº¯t Ä‘áº§u má»™t Chat má»›i Ä‘á»ƒ AI cÃ³ ngay "báº£n Ä‘á»“" trong tay.