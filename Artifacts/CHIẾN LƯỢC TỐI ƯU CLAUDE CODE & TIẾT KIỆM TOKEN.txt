ğŸš€ CHIáº¾N LÆ¯á»¢C Tá»I Æ¯U CLAUDE CODE & TIáº¾T KIá»†M TOKEN (ENGQUEST)

Báº£n káº¿ hoáº¡ch nÃ y giÃºp báº¡n kiá»ƒm soÃ¡t chi phÃ­ khi sá»­ dá»¥ng cÃ¡c AI Agent (Claude/Gemini) trong VS Code, trÃ¡nh viá»‡c AI tiÃªu tá»‘n hÃ ng Ä‘Ã´-la cho má»™t thay Ä‘á»•i nhá».

1. Chia nhá» Module (Modularization Strategy)

Hiá»‡n táº¡i AITutor.jsx Ä‘ang lÃ  má»™t "Monolith" (file khá»•ng lá»“). Khi báº¡n sá»­a má»™t cÃ¡i nÃºt, AI pháº£i Ä‘á»c láº¡i toÃ n bá»™ logic Engine. HÃ£y yÃªu cáº§u AI tÃ¡ch ra theo cáº¥u trÃºc sau:

Lá»™ trÃ¬nh tÃ¡ch file:

src/services/aiTutor/tutorEngine.js: Chá»©a toÃ n bá»™ logic gá»i API Gemini, Ä‘á»‹nh nghÄ©a Schema vÃ  System Prompt.

src/services/aiTutor/mcpRegistry.js: Chá»©a Ä‘á»‹nh nghÄ©a vÃ  trÃ¬nh thá»±c thi cÃ¡c cÃ´ng cá»¥ MCP (Tools).

src/modules/ai_tutor/components/: Chia nhá» UI thÃ nh cÃ¡c thÃ nh pháº§n con:

ChatWindow.jsx: Chá»‰ quáº£n lÃ½ danh sÃ¡ch tin nháº¯n vÃ  cuá»™n trang.

GrammarFocus.jsx: Hiá»ƒn thá»‹ Ã´ giáº£i thÃ­ch ngá»¯ phÃ¡p.

HintChips.jsx: Hiá»ƒn thá»‹ cÃ¡c nÃºt gá»£i Ã½.

TabNavigation.jsx: Thanh chuyá»ƒn Ä‘á»•i giá»¯a Story/Roleplay/Review.

src/modules/ai_tutor/AITutor.jsx: Chá»‰ Ä‘Ã³ng vai trÃ² "nháº¡c trÆ°á»Ÿng" Ä‘á»ƒ Ä‘iá»u phá»‘i cÃ¡c component trÃªn.

Lá»£i Ã­ch: Khi cáº§n sá»­a giao diá»‡n, báº¡n chá»‰ cáº§n má»Ÿ file Component tÆ°Æ¡ng á»©ng (~50 lines). AI sáº½ khÃ´ng pháº£i Ä‘á»c láº¡i 500 lines logic Engine.

2. Cáº¥u hÃ¬nh .clauderules (Hoáº·c .clinerules)

Táº¡o file nÃ y táº¡i thÆ° má»¥c gá»‘c cá»§a dá»± Ã¡n. ÄÃ¢y lÃ  "Luáº­t phÃ¡p" buá»™c AI pháº£i tuÃ¢n theo Ä‘á»ƒ trÃ¡nh lÃ£ng phÃ­ token.

# RULES FOR AI AGENT
- TRÆ¯á»šC KHI thá»±c hiá»‡n báº¥t ká»³ task nÃ o, hÃ£y Ä‘á»c file `docs/context.md` Ä‘á»ƒ náº¯m báº¯t tá»•ng quan.
- KHÃ”NG tá»± Ã½ cháº¡y `grep`, `find`, hoáº·c `ls -R` trÃªn toÃ n bá»™ repo. Äiá»u nÃ y cá»±c ká»³ tá»‘n token.
- Náº¿u cáº§n tÃ¬m kiáº¿m, hÃ£y há»i User pháº¡m vi thÆ° má»¥c cá»¥ thá»ƒ (vÃ­ dá»¥: src/modules).
- KHÃ”NG Ä‘á»c cÃ¡c file trong `node_modules`, `dist`, hoáº·c `.git`.
- Æ¯u tiÃªn sá»­a lá»—i cá»¥c bá»™ (Partial edit). KhÃ´ng bao giá» viáº¿t láº¡i toÃ n bá»™ file náº¿u chá»‰ cáº§n sá»­a vÃ i dÃ²ng.
- Khi má»™t file vÆ°á»£t quÃ¡ 200 dÃ²ng, hÃ£y Ä‘á» xuáº¥t tÃ¡ch module thay vÃ¬ tiáº¿p tá»¥c viáº¿t thÃªm vÃ o Ä‘Ã³.
- Táº¯t hÃ nh vi tá»± Ä‘á»™ng scan láº¡i repo sau má»—i thay Ä‘á»•i trá»« khi Ä‘Æ°á»£c yÃªu cáº§u.


3. Quáº£n lÃ½ Ngá»¯ cáº£nh vá»›i docs/context.md

Thay vÃ¬ Ä‘á»ƒ AI tá»± scan toÃ n bá»™ hÃ ng trÄƒm file, hÃ£y duy trÃ¬ má»™t file "Báº£n Ä‘á»“ dá»± Ã¡n". AI chá»‰ cáº§n Ä‘á»c file nÃ y lÃ  hiá»ƒu má»i thá»©.

Cáº¥u trÃºc file docs/context.md:

Tech Stack: React, Vite, Tailwind, Firebase, Gemini API.

Cáº¥u trÃºc thÆ° má»¥c: MÃ´ táº£ ngáº¯n gá»n chá»©c nÄƒng cá»§a tá»«ng thÆ° má»¥c chÃ­nh.

Luá»“ng dá»¯ liá»‡u: CÃ¡ch AI Tutor nháº­n Syllabus vÃ  tráº£ vá» JSON.

Tráº¡ng thÃ¡i hiá»‡n táº¡i: Task nÃ o Ä‘ang lÃ m dá»Ÿ, Task nÃ o Ä‘Ã£ xong.

CÃ¡ch dÃ¹ng: Má»—i khi báº¯t Ä‘áº§u má»™t lÆ°á»£t chat má»›i, hÃ£y gÃµ: @docs/context.md HÃ£y Ä‘á»c file nÃ y Ä‘á»ƒ náº¯m bá»‘i cáº£nh, sau Ä‘Ã³ sá»­a file [tÃªn_file] cho tÃ´i.

4. Kiá»ƒm soÃ¡t Lá»‹ch sá»­ & TÃ³m táº¯t Chat (Chat Management)

Lá»‹ch sá»­ chat cÃ ng dÃ i, chi phÃ­ má»—i tin nháº¯n cÃ ng tÄƒng theo cáº¥p sá»‘ nhÃ¢n.

Quy táº¯c "Má»™t Task - Má»™t Chat": Khi xong má»™t tÃ­nh nÄƒng (vÃ­ dá»¥: xong cÃ¡i Header), hÃ£y káº¿t thÃºc lÆ°á»£t chat Ä‘Ã³.

Ká»¹ thuáº­t TÃ³m táº¯t (The Handover): TrÆ°á»›c khi nháº¥n "New Task", hÃ£y báº£o AI:

"HÃ£y tÃ³m táº¯t ngáº¯n gá»n tráº¡ng thÃ¡i hiá»‡n táº¡i cá»§a task nÃ y, cÃ¡c thay Ä‘á»•i Ä‘Ã£ thá»±c hiá»‡n vÃ  nhá»¯ng viá»‡c cáº§n lÃ m tiáº¿p theo vÃ o má»™t Ä‘oáº¡n vÄƒn ngáº¯n. TÃ´i sáº½ dÃ¹ng nÃ³ cho lÆ°á»£t chat má»›i."

Khá»Ÿi táº¡o Task má»›i: Copy Ä‘oáº¡n tÃ³m táº¯t Ä‘Ã³ dÃ¡n vÃ o lÆ°á»£t chat má»›i. Äiá»u nÃ y giÃºp AI "nhá»›" viá»‡c nhÆ°ng khÃ´ng pháº£i "gÃ¡nh" hÃ ng chá»¥c tin nháº¯n cÅ©.

5. Viáº¿t Prompt Tiáº¿t kiá»‡m Token

Context Pinning: LuÃ´n dÃ¹ng tÃ­nh nÄƒng @ (hoáº·c kÃ©o tháº£ file) Ä‘á»ƒ chá»‰ Ä‘á»‹nh chÃ­nh xÃ¡c file cáº§n sá»­a. Äá»«ng nÃ³i "Sá»­a app", hÃ£y nÃ³i "@AITutor.jsx Sá»­a lá»—i mÃ u nÃºt".

Chá»‰ Ä‘á»‹nh dÃ²ng: Náº¿u báº¡n biáº¿t lá»—i á»Ÿ Ä‘Ã¢u, hÃ£y nÃ³i: "HÃ£y sá»­a logic á»Ÿ khoáº£ng dÃ²ng 45-60 trong file @tutorEngine.js". AI sáº½ khÃ´ng cáº§n phÃ¢n tÃ­ch cÃ¡c pháº§n khÃ¡c.

Output ngáº¯n gá»n: ThÃªm cÃ¢u: "Chá»‰ tráº£ vá» Ä‘oáº¡n mÃ£ thay Ä‘á»•i, khÃ´ng cáº§n giáº£i thÃ­ch dÃ i dÃ²ng hoáº·c viáº¿t láº¡i cÃ¡c hÃ m khÃ´ng liÃªn quan."

6. NgÄƒn cháº·n VÃ²ng láº·p VÃ´ háº¡n (Anti-Loop)

Náº¿u báº¡n tháº¥y AI báº¯t Ä‘áº§u tá»± Ä‘á»™ng ls hoáº·c read_file liÃªn tá»¥c mÃ  khÃ´ng ra káº¿t quáº£:

Nháº¥n nÃºt Stop ngay láº­p tá»©c.

Can thiá»‡p thá»§ cÃ´ng: Cung cáº¥p cho nÃ³ Ä‘Æ°á»ng dáº«n file chÃ­nh xÃ¡c.

Äiá»u chá»‰nh Rules: Náº¿u nÃ³ láº·p láº¡i hÃ nh vi nÃ y, hÃ£y cáº­p nháº­t vÃ o .clauderules: "Náº¿u khÃ´ng tÃ¬m tháº¥y file sau 2 láº§n thá»­, hÃ£y dá»«ng láº¡i vÃ  há»i User Ä‘Æ°á»ng dáº«n chÃ­nh xÃ¡c."

Ghi chÃº: Tiáº¿t kiá»‡m token khÃ´ng chá»‰ lÃ  tiáº¿t kiá»‡m tiá»n, mÃ  cÃ²n giÃºp AI pháº£n há»“i nhanh hÆ¡n vÃ  Ã­t bá»‹ nháº§m láº«n hÆ¡n (do ngá»¯ cáº£nh sáº¡ch sáº½).