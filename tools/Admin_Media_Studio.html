<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EngQuest Asset Generator</title>
    <style>
        * { box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; padding: 20px; }
        .container { background: white; padding: 2.5rem; border-radius: 20px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); max-width: 800px; width: 100%; }
        h1 { color: #4f46e5; margin: 0 0 0.5rem 0; font-size: 2rem; }
        .subtitle { color: #64748b; font-size: 0.95rem; margin-bottom: 2rem; }
        .tabs { display: flex; gap: 1rem; margin-bottom: 2rem; border-bottom: 2px solid #e2e8f0; }
        .tab { padding: 1rem 1.5rem; cursor: pointer; border: none; background: none; font-size: 1rem; font-weight: 600; color: #64748b; position: relative; transition: color 0.2s; }
        .tab:hover { color: #4f46e5; }
        .tab.active { color: #4f46e5; }
        .tab.active::after { content: ''; position: absolute; bottom: -2px; left: 0; right: 0; height: 2px; background: #4f46e5; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .input-group { display: flex; gap: 1rem; margin-bottom: 1.5rem; flex-wrap: wrap; }
        .input-wrapper { flex: 1; min-width: 200px; }
        label { display: block; font-size: 0.875rem; font-weight: 600; color: #334155; margin-bottom: 0.5rem; }
        input, select { width: 100%; padding: 0.75rem; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 1rem; outline: none; transition: border-color 0.2s; }
        input:focus, select:focus { border-color: #4f46e5; }
        .voice-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 1.5rem; }
        button { background: #4f46e5; color: white; border: none; padding: 1rem 2rem; border-radius: 8px; font-size: 1rem; font-weight: bold; cursor: pointer; transition: all 0.2s; width: 100%; }
        button:hover { background: #4338ca; transform: translateY(-2px); }
        button.secondary { background: #64748b; }
        button.secondary:hover { background: #475569; }
        .result { margin-top: 1.5rem; background: #1e293b; padding: 1.5rem; border-radius: 12px; }
        code { color: #22d3ee; font-family: 'Monaco', 'Courier New', monospace; font-size: 0.95rem; display: block; margin-bottom: 0.5rem; word-break: break-all; }
        .copy-hint { color: #94a3b8; font-size: 0.875rem; text-align: center; }
        .info-box { background: #eff6ff; border-left: 4px solid #3b82f6; padding: 1rem; border-radius: 6px; margin-bottom: 1.5rem; font-size: 0.875rem; color: #1e40af; }
        .warning-box { background: #fef3c7; border-left: 4px solid #f59e0b; padding: 1rem; border-radius: 6px; margin-bottom: 1.5rem; font-size: 0.875rem; color: #92400e; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé® EngQuest Asset Generator</h1>
        <p class="subtitle">T·∫°o l·ªánh terminal cho Audio, Video v√† Images</p>
        
        <div class="tabs">
            <button class="tab active" onclick="switchTab('audio')">üé§ Audio</button>
            <button class="tab" onclick="switchTab('video')">üìπ Video</button>
            <button class="tab" onclick="switchTab('image')">üñºÔ∏è Images</button>
        </div>

        <!-- AUDIO TAB -->
        <div id="audio" class="tab-content active">
            <div class="info-box">
                ‚ö†Ô∏è <strong>voiceConfig l√† B·∫ÆT BU·ªòC!</strong> Week data ph·∫£i c√≥ voiceConfig tr∆∞·ªõc khi generate audio.
            </div>

            <div class="input-group">
                <div class="input-wrapper">
                    <label>Tu·∫ßn b·∫Øt ƒë·∫ßu</label>
                    <input type="number" id="audioStart" value="1" min="1" max="144">
                </div>
                <div class="input-wrapper">
                    <label>Tu·∫ßn k·∫øt th√∫c</label>
                    <input type="number" id="audioEnd" value="1" min="1" max="144">
                </div>
            </div>

            <div class="input-wrapper" style="margin-bottom: 1.5rem;">
                <label>Ph∆∞∆°ng th·ª©c t·∫°o Audio</label>
                <select id="audioMethod">
                    <option value="node">Node.js + Google TTS (Recommended ‚≠ê)</option>
                    <option value="python">Python + OpenAI TTS (2 b∆∞·ªõc)</option>
                </select>
            </div>

            <label style="margin-bottom: 0.5rem; display: block;">üé§ Ch·ªçn gi·ªçng cho tu·∫ßn n√†y (Optional - Override defaults):</label>
            <div class="voice-grid">
                <div class="input-wrapper">
                    <label>Narration (stories)</label>
                    <select id="voiceNarration">
                        <option value="">Default: en-US-Neural2-D</option>
                        <option value="en-US-Neural2-A">US Male A</option>
                        <option value="en-US-Neural2-D">US Male D</option>
                        <option value="en-US-Neural2-G">US Male G</option>
                        <option value="en-GB-Neural2-A">GB Male A</option>
                        <option value="en-GB-Neural2-D">GB Male D</option>
                        <option value="en-AU-Neural2-A">AU Male A</option>
                    </select>
                </div>
                <div class="input-wrapper">
                    <label>Vocabulary (vocab)</label>
                    <select id="voiceVocab">
                        <option value="">Default: en-US-Neural2-F</option>
                        <option value="en-US-Neural2-F">US Female F</option>
                        <option value="en-GB-Neural2-B">GB Female B</option>
                        <option value="en-AU-Neural2-B">AU Female B</option>
                    </select>
                </div>
                <div class="input-wrapper">
                    <label>Dictation</label>
                    <select id="voiceDictation">
                        <option value="">Default: en-US-Neural2-E</option>
                        <option value="en-US-Neural2-E">US Neutral E</option>
                        <option value="en-GB-Neural2-C">GB Neutral C</option>
                        <option value="en-AU-Neural2-C">AU Neutral C</option>
                    </select>
                </div>
            </div>

            <button onclick="generateAudioCommand()">‚ö° T·∫†O L·ªÜNH AUDIO</button>

            <div id="audioResult" class="result" style="display:none;">
                <code id="audioCmd"></code>
                <p class="copy-hint">‚úÖ ƒê√£ copy v√†o clipboard! D√°n v√†o Terminal ƒë·ªÉ ch·∫°y.</p>
            </div>
        </div>

        <!-- VIDEO TAB -->
        <div id="video" class="tab-content">
            <div class="warning-box">
                ‚ö†Ô∏è <strong>Video c·∫ßn 2 b∆∞·ªõc:</strong><br>
                1Ô∏è‚É£ Manual: T·∫°o file <code>video_queries.json</code> v·ªõi 5 queries<br>
                2Ô∏è‚É£ Auto: Ch·∫°y l·ªánh d∆∞·ªõi ƒë√¢y ƒë·ªÉ t√¨m videos t·ª´ YouTube
            </div>

            <div class="input-wrapper" style="margin-bottom: 1.5rem;">
                <label>Tu·∫ßn c·∫ßn t·∫°o video</label>
                <input type="number" id="videoWeek" value="1" min="1" max="144">
            </div>

            <div class="info-box">
                üìù ƒê·∫£m b·∫£o file <code>src/data/weeks/week_XX/video_queries.json</code> ƒë√£ c√≥ 5 queries:<br>
                - 1 GRAMMAR query<br>
                - 2 TOPIC queries<br>
                - 2 SCIENCE queries
            </div>

            <button onclick="generateVideoCommand()">‚ö° T·∫†O L·ªÜNH VIDEO</button>

            <div id="videoResult" class="result" style="display:none;">
                <code id="videoCmd"></code>
                <p class="copy-hint">‚úÖ ƒê√£ copy v√†o clipboard! D√°n v√†o Terminal ƒë·ªÉ ch·∫°y.</p>
            </div>
        </div>

        <!-- IMAGE TAB -->
        <div id="image" class="tab-content">
            <div class="info-box">
                üñºÔ∏è Image count t·ª± ƒë·ªông theo phase:<br>
                ‚Ä¢ Phase 1 (weeks 1-54): 15 images<br>
                ‚Ä¢ Phase 2 (weeks 55-120): 17 images<br>
                ‚Ä¢ Phase 3 (weeks 121-144): 19 images
            </div>

            <div class="input-group">
                <div class="input-wrapper">
                    <label>Tu·∫ßn b·∫Øt ƒë·∫ßu</label>
                    <input type="number" id="imageStart" value="1" min="1" max="144">
                </div>
                <div class="input-wrapper">
                    <label>Tu·∫ßn k·∫øt th√∫c</label>
                    <input type="number" id="imageEnd" value="5" min="1" max="144">
                </div>
            </div>

            <button onclick="generateImageCommand()">‚ö° T·∫†O L·ªÜNH IMAGE</button>

            <div id="imageResult" class="result" style="display:none;">
                <code id="imageCmd"></code>
                <p class="copy-hint">‚úÖ ƒê√£ copy v√†o clipboard! D√°n v√†o Terminal ƒë·ªÉ ch·∫°y.</p>
            </div>
        </div>
    </div>

    <script>
        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(el => el.classList.remove('active'));
            
            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        function generateAudioCommand() {
            const start = document.getElementById('audioStart').value;
            const end = document.getElementById('audioEnd').value;
            const method = document.getElementById('audioMethod').value;
            
            const voiceNarration = document.getElementById('voiceNarration').value;
            const voiceVocab = document.getElementById('voiceVocab').value;
            const voiceDictation = document.getElementById('voiceDictation').value;
            
            let cmd = '';
            let envVars = [];
            
            // Build environment variable overrides
            if (voiceNarration) envVars.push(`VOICE_NARRATION=${voiceNarration}`);
            if (voiceVocab) envVars.push(`VOICE_VOCABULARY=${voiceVocab}`);
            if (voiceDictation) envVars.push(`VOICE_DICTATION=${voiceDictation}`);
            
            const envPrefix = envVars.length > 0 ? envVars.join(' ') + ' ' : '';
            
            if (method === 'node') {
                cmd = `${envPrefix}node tools/generate_audio.js ${start} ${end}`;
            } else {
                cmd = `${envPrefix}node tools/create_audio_tasks_only.js ${start} ${end} && export OPENAI_API_KEY="$(grep OPENAI_API_KEY 'API keys.txt' | cut -d'=' -f2)" && python3 tools/generate_audio.py --provider openai`;
            }
            
            document.getElementById('audioCmd').innerText = cmd;
            document.getElementById('audioResult').style.display = 'block';
            navigator.clipboard.writeText(cmd);
        }

        function generateVideoCommand() {
            const week = document.getElementById('videoWeek').value;
            const cmd = `node tools/update_videos.js ${week}`;
            
            document.getElementById('videoCmd').innerText = cmd;
            document.getElementById('videoResult').style.display = 'block';
            navigator.clipboard.writeText(cmd);
        }

        function generateImageCommand() {
            const start = document.getElementById('imageStart').value;
            const end = document.getElementById('imageEnd').value;
            const cmd = `node tools/batch_manager.js ${start} ${end}`;
            
            document.getElementById('imageCmd').innerText = cmd;
            document.getElementById('imageResult').style.display = 'block';
            navigator.clipboard.writeText(cmd);
        }
    </script>
</body>
</html>
